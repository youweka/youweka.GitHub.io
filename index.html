<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Financial Assistant - Comprehensive Money Planning</title>
    <meta name="description" content="Get personalized investment recommendations, smart budget analysis, and financial planning advice based on your profile and goals.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e6ed;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            text-align: center;
            padding: 2rem 0;
            background: rgba(10, 14, 39, 0.8);
            margin-bottom: 2rem;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #64ffda, #4fc3f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .tagline {
            font-size: 1.2rem;
            color: #8892b0;
            margin-bottom: 1rem;
        }

        .description {
            max-width: 700px;
            margin: 0 auto;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .tab {
            padding: 10px 20px;
            background: rgba(26, 26, 46, 0.8);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 25px;
            color: #e0e6ed;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-width: 120px;
        }

        .tab.active {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
        }

        .tab:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: #64ffda;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .calculators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .calculator-card, .advisor-card {
            background: rgba(26, 26, 46, 0.9);
            border-radius: 15px;
            padding: 2rem;
            border: 2px solid rgba(100, 255, 218, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .calculator-card::before, .advisor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, #64ffda, #4fc3f7);
        }

        .calculator-card:hover, .advisor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(100, 255, 218, 0.4);
        }

        .calculator-title, .advisor-title {
            color: #64ffda;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .calculator-icon {
            font-size: 2rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #64ffda;
            font-weight: 500;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            background: rgba(10, 14, 39, 0.8);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 8px;
            color: #e0e6ed;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #64ffda;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.2);
        }

        .calculate-btn, .analyze-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            border: 2px solid #64ffda;
            color: #64ffda;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .calculate-btn:hover, .analyze-btn:hover {
            background: #64ffda;
            color: #0a0e27;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }

        .result, .advice {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 8px;
            padding: 1rem;
            text-align: left;
            min-height: 60px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .result.empty, .advice.empty {
            color: #8892b0;
            font-weight: normal;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result.calculated, .advice.generated {
            color: #e0e6ed;
            background: rgba(100, 255, 218, 0.15);
        }

        .advice-section {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(100, 255, 218, 0.05);
            border-radius: 8px;
            border-left: 4px solid #64ffda;
        }

        .advice-title {
            color: #64ffda;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .recommendation-card {
            background: rgba(10, 14, 39, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
        }

        .recommendation-title {
            color: #64ffda;
            font-weight: bold;
            margin-bottom: 0.3rem;
        }

        .risk-badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 0.5rem;
        }

        .risk-low { background: rgba(76, 175, 80, 0.3); color: #4caf50; }
        .risk-medium { background: rgba(255, 193, 7, 0.3); color: #ffc107; }
        .risk-high { background: rgba(244, 67, 54, 0.3); color: #f44336; }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(100, 255, 218, 0.2);
            border-radius: 4px;
            margin: 0.5rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #64ffda, #4fc3f7);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .market-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .market-item {
            background: rgba(10, 14, 39, 0.6);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .market-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #64ffda;
        }

        .market-label {
            font-size: 0.9rem;
            color: #8892b0;
            margin-top: 0.3rem;
        }

        .tips {
            background: rgba(26, 26, 46, 0.9);
            border-radius: 15px;
            padding: 2rem;
            border: 2px solid rgba(100, 255, 218, 0.2);
            margin-top: 2rem;
        }

        .tips h3 {
            color: #64ffda;
            margin-bottom: 1rem;
            text-align: center;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .tip-item {
            background: rgba(100, 255, 218, 0.1);
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #64ffda;
        }

        .tip-item strong {
            color: #64ffda;
            display: block;
            margin-bottom: 0.5rem;
        }

        footer {
            text-align: center;
            padding: 2rem 0;
            border-top: 1px solid rgba(100, 255, 218, 0.2);
            margin-top: 3rem;
            color: #8892b0;
        }

        .creator-info {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(100, 255, 218, 0.05);
            border-radius: 8px;
        }

        .creator-info a {
            color: #64ffda;
            text-decoration: none;
        }

        .creator-info a:hover {
            text-decoration: underline;
        }

        .portfolio-weights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .weight-item {
            background: rgba(10, 14, 39, 0.6);
            padding: 0.75rem;
            border-radius: 8px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .weight-label {
            font-size: 0.9rem;
            color: #8892b0;
            margin-bottom: 0.25rem;
        }

        .weight-input {
            width: 100%;
            padding: 8px;
            background: rgba(10, 14, 39, 0.8);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 4px;
            color: #e0e6ed;
            font-size: 0.9rem;
        }

        .data-sources {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.85rem;
            color: #8892b0;
        }

        .data-sources h4 {
            color: #64ffda;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .data-sources a {
            color: #64ffda;
            text-decoration: none;
        }

        .data-sources a:hover {
            text-decoration: underline;
        }

        .chart-container {
            margin: 1rem 0;
            background: rgba(10, 14, 39, 0.6);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .chart-container canvas {
            max-height: 400px;
        }

        .definition-box {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .definition-title {
            color: #64ffda;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .credit-score-range {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .score-item {
            background: rgba(10, 14, 39, 0.6);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 2px solid;
        }

        .score-excellent { border-color: #4caf50; }
        .score-good { border-color: #8bc34a; }
        .score-fair { border-color: #ffc107; }
        .score-poor { border-color: #ff9800; }
        .score-bad { border-color: #f44336; }

        .year-plan {
            background: rgba(26, 26, 46, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            border: 2px solid rgba(100, 255, 218, 0.2);
        }

        .year-header {
            color: #64ffda;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
            padding-bottom: 0.5rem;
        }

        .year-goals {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .goal-category {
            background: rgba(100, 255, 218, 0.1);
            border-radius: 8px;
            padding: 1rem;
            border-left: 4px solid #64ffda;
        }

        .goal-title {
            color: #64ffda;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .calculators-grid {
                grid-template-columns: 1fr;
            }
            
            .calculator-card, .advisor-card {
                padding: 1.5rem;
            }
            
            .logo {
                font-size: 2rem;
            }

            .tabs {
                flex-direction: column;
                align-items: center;
            }

            .tab {
                min-width: 200px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">InvestiGator: Your Smart Financial Assistant</h1>
            <p class="tagline">Comprehensive Personal Finance Planning</p>
            <p class="description">
                Get personalized investment recommendations, smart budget analysis, and financial planning advice 
                tailored to your age, income, and goals. The comprehensive financial advisor that understands Indian markets.
            </p>
        </div>
    </header>

    <main class="container">
        <div class="tabs">
            <div class="tab active" onclick="switchTab('calculators')">üìä Basic Calculators</div>
            <div class="tab" onclick="switchTab('advisor')">üéØ Smart Advisor</div>
            <div class="tab" onclick="switchTab('planning')">üìà Goal Planning</div>
            <div class="tab" onclick="switchTab('portfolio')">üìã Portfolio Manager</div>
            <div class="tab" onclick="switchTab('market')">üì∞ Market Insights</div>
            <div class="tab" onclick="switchTab('credit')">üí≥ Credit Building</div>
            <div class="tab" onclick="switchTab('freshie')">üéì 5-Year Freshie Guide</div>
        </div>

        <!-- Basic Calculators Tab -->
        <div id="calculators" class="tab-content active">
            <div class="calculators-grid">
                <!-- EMI Calculator -->
                <div class="calculator-card">
                    <h2 class="calculator-title">
                        <span class="calculator-icon">üè†</span>
                        Loan EMI Calculator
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">What is EMI?</div>
                        EMI (Equated Monthly Installment) is the fixed amount you pay every month to repay a loan. It consists of both principal (original loan amount) and interest components. EMI = [P √ó r √ó (1+r)‚Åø] / [(1+r)‚Åø - 1], where P = Principal, r = monthly interest rate, n = number of months.
                    </div>
                    <div class="input-group">
                        <label for="loanAmount">Loan Amount (‚Çπ)</label>
                        <input type="number" id="loanAmount" placeholder="e.g., 500000" min="1000">
                    </div>
                    <div class="input-group">
                        <label for="interestRate">Interest Rate (% per year)</label>
                        <input type="number" id="interestRate" placeholder="e.g., 8.5" step="0.1" min="0.1">
                    </div>
                    <div class="input-group">
                        <label for="loanTenure">Loan Tenure (Years)</label>
                        <input type="number" id="loanTenure" placeholder="e.g., 20" min="1">
                    </div>
                    <button class="calculate-btn" onclick="calculateEMI()">Calculate EMI</button>
                    <div class="result empty" id="emiResult">
                        Enter loan details to see your monthly EMI
                    </div>
                    <div class="chart-container" id="emiChart" style="display: none;">
                        <canvas id="emiChartCanvas"></canvas>
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>EMI = [P √ó r √ó (1+r)‚Åø] / [(1+r)‚Åø - 1]</strong><br>
                        Where: P = Principal loan amount, r = Monthly interest rate, n = Number of months<br>
                        <strong>Total Interest = (EMI √ó n) - P</strong><br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://math.stackexchange.com/questions/279844/how-the-formula-for-emi-is-derived" target="_blank">Mathematical Derivation - Stack Exchange</a><br>
                        ‚Ä¢ <a href="https://emicalculator.net/" target="_blank">EMI Calculator Formula Validation</a><br>
                        ‚Ä¢ <a href="https://cleartax.in/s/emi-calculation-formula" target="_blank">EMI Formula Guide - ClearTax</a>
                    </div>
                </div>

                <!-- Investment Calculator -->
                <div class="calculator-card">
                    <h2 class="calculator-title">
                        <span class="calculator-icon">üìà</span>
                        Investment Returns
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Investment Concepts</div>
                        <strong>SIP (Systematic Investment Plan):</strong> Regular monthly investments that benefit from rupee cost averaging.<br>
                        <strong>Compound Interest:</strong> Earning returns on your returns - the 8th wonder of the world according to Einstein.<br>
                        <strong>Future Value:</strong> What your money will be worth after accounting for growth/returns.
                    </div>
                    <div class="input-group">
                        <label for="principal">Initial Investment (‚Çπ)</label>
                        <input type="number" id="principal" placeholder="e.g., 100000" min="100">
                    </div>
                    <div class="input-group">
                        <label for="sipAmount">Monthly SIP (‚Çπ)</label>
                        <input type="number" id="sipAmount" placeholder="e.g., 5000" min="0">
                    </div>
                    <div class="input-group">
                        <label for="returnRate">Expected Return (% per year)</label>
                        <input type="number" id="returnRate" placeholder="e.g., 12" step="0.1" min="0.1">
                    </div>
                    <div class="input-group">
                        <label for="timePeriod">Investment Period (Years)</label>
                        <input type="number" id="timePeriod" placeholder="e.g., 10" min="1">
                    </div>
                    <button class="calculate-btn" onclick="calculateInvestment()">Calculate Returns</button>
                    <div class="result empty" id="investmentResult">
                        Enter investment details to see future value
                    </div>
                    <div class="chart-container" id="investmentChart" style="display: none;">
                        <canvas id="investmentChartCanvas"></canvas>
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>Future Value of Lump Sum: FV = PV √ó (1 + r)‚Åø</strong><br>
                        <strong>Future Value of SIP: FV = PMT √ó [((1 + r)‚Åø - 1) / r]</strong><br>
                        <strong>Total Future Value = FV(Lump Sum) + FV(SIP)</strong><br>
                        Where: PV = Present Value, PMT = Monthly Payment, r = Monthly rate, n = Number of months<br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.investopedia.com/terms/f/futurevalue.asp" target="_blank">Future Value Formula - Investopedia</a><br>
                        ‚Ä¢ <a href="https://www.mathwarehouse.com/answered-questions/compound-interest/compounding-with-additional-deposits.php" target="_blank">Compound Interest with Regular Contributions</a><br>
                        ‚Ä¢ <a href="https://zerodha.com/varsity/chapter/sip-and-the-power-of-compounding/" target="_blank">SIP Compounding - Zerodha Varsity</a>
                    </div>
                </div>

                <!-- Budget Calculator -->
                <div class="calculator-card">
                    <h2 class="calculator-title">
                        <span class="calculator-icon">üí≥</span>
                        Monthly Budget Planner
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Budget Components</div>
                        <strong>Essential Expenses (Needs):</strong> Rent, groceries, utilities, insurance - things you can't live without.<br>
                        <strong>Discretionary Expenses (Wants):</strong> Dining out, entertainment, shopping - nice to have but not essential.<br>
                        <strong>Savings Rate:</strong> Percentage of income saved - target 20% minimum for financial health.
                    </div>
                    <div class="input-group">
                        <label for="monthlyIncome">Monthly Income (‚Çπ)</label>
                        <input type="number" id="monthlyIncome" placeholder="e.g., 50000" min="1000">
                    </div>
                    <div class="input-group">
                        <label for="essentialExpenses">Essential Expenses (‚Çπ)</label>
                        <input type="number" id="essentialExpenses" placeholder="e.g., 25000" min="0">
                    </div>
                    <div class="input-group">
                        <label for="discretionaryExpenses">Discretionary Expenses (‚Çπ)</label>
                        <input type="number" id="discretionaryExpenses" placeholder="e.g., 15000" min="0">
                    </div>
                    <button class="calculate-btn" onclick="calculateBudget()">Analyze Budget</button>
                    <div class="result empty" id="budgetResult">
                        Enter your expenses to see budget analysis
                    </div>
                    <div class="chart-container" id="budgetChart" style="display: none;">
                        <canvas id="budgetChartCanvas"></canvas>
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>Savings Rate = (Income - Total Expenses) / Income √ó 100</strong><br>
                        <strong>50-30-20 Rule: Needs (50%) + Wants (30%) + Savings (20%) = 100%</strong><br>
                        <strong>Expense Ratio = Expense Category / Total Income √ó 100</strong><br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.investopedia.com/ask/answers/022916/what-502030-budget-rule.asp" target="_blank">50-30-20 Rule - Investopedia</a><br>
                        ‚Ä¢ <a href="https://www.nerdwallet.com/article/finance/nerdwallet-budget-calculator" target="_blank">Budget Analysis Methods - NerdWallet</a><br>
                        ‚Ä¢ <a href="https://www.rbi.org.in/Scripts/PublicationsView.aspx?id=20411" target="_blank">Household Finance Survey - RBI</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Smart Advisor Tab -->
        <div id="advisor" class="tab-content">
            <div class="calculators-grid">
                <div class="advisor-card full-width">
                    <h2 class="advisor-title">
                        <span class="calculator-icon">üß†</span>
                        Personalized Investment Advisor
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Investment Advisory Concepts</div>
                        <strong>Risk Tolerance:</strong> Your ability and willingness to lose money in exchange for potential higher returns.<br>
                        <strong>Asset Allocation:</strong> How you divide your investments among different asset categories (equity, debt, gold).<br>
                        <strong>Time Horizon:</strong> How long you plan to keep your money invested before needing it.
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <div>
                            <div class="input-group">
                                <label for="age">Your Age</label>
                                <input type="number" id="age" placeholder="e.g., 28" min="18" max="100">
                            </div>
                            <div class="input-group">
                                <label for="income">Monthly Income (‚Çπ)</label>
                                <input type="number" id="income" placeholder="e.g., 75000" min="10000">
                            </div>
                            <div class="input-group">
                                <label for="investmentAmount">Available for Investment (‚Çπ)</label>
                                <input type="number" id="investmentAmount" placeholder="e.g., 15000" min="500">
                            </div>
                            <div class="input-group">
                                <label for="riskTolerance">Risk Tolerance</label>
                                <select id="riskTolerance">
                                    <option value="">Select your risk preference</option>
                                    <option value="conservative">Conservative (Low Risk)</option>
                                    <option value="moderate">Moderate (Medium Risk)</option>
                                    <option value="aggressive">Aggressive (High Risk)</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <div class="input-group">
                                <label for="investmentGoal">Primary Investment Goal</label>
                                <select id="investmentGoal">
                                    <option value="">Select your goal</option>
                                    <option value="retirement">Retirement Planning</option>
                                    <option value="house">Buy a House</option>
                                    <option value="education">Child's Education</option>
                                    <option value="travel">Travel/Vacation</option>
                                    <option value="emergency">Emergency Fund</option>
                                    <option value="wealth">Wealth Creation</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="timeHorizon">Investment Time Horizon</label>
                                <select id="timeHorizon">
                                    <option value="">Select time period</option>
                                    <option value="short">1-3 years (Short Term)</option>
                                    <option value="medium">3-7 years (Medium Term)</option>
                                    <option value="long">7+ years (Long Term)</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="currentSavings">Current Savings (‚Çπ)</label>
                                <input type="number" id="currentSavings" placeholder="e.g., 200000" min="0">
                            </div>
                            <div class="input-group">
                                <label for="hasEmergencyFund">Do you have 6 months emergency fund?</label>
                                <select id="hasEmergencyFund">
                                    <option value="">Select</option>
                                    <option value="yes">Yes, I have emergency fund</option>
                                    <option value="no">No, I don't have emergency fund</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button class="analyze-btn" onclick="generatePersonalizedAdvice()">Get My Personalized Plan</button>
                    <div class="advice empty" id="personalizedAdvice">
                        Fill in your details to get personalized investment recommendations tailored for you
                    </div>
                </div>
            </div>
        </div>

        <!-- Goal Planning Tab -->
        <div id="planning" class="tab-content">
            <div class="calculators-grid">
                <div class="calculator-card">
                    <h2 class="calculator-title">
                        <span class="calculator-icon">üéØ</span>
                        Retirement Planning
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Retirement Planning Concepts</div>
                        <strong>Retirement Corpus:</strong> Total amount needed to maintain your lifestyle post-retirement.<br>
                        <strong>4% Withdrawal Rule:</strong> Withdraw 4% annually from your corpus to last 25 years (25x annual expenses rule).<br>
                        <strong>Inflation:</strong> The rate at which prices increase, reducing your money's purchasing power over time.
                    </div>
                    <div class="input-group">
                        <label for="currentAge">Current Age</label>
                        <input type="number" id="currentAge" placeholder="e.g., 30" min="18" max="100">
                    </div>
                    <div class="input-group">
                        <label for="retirementAge">Desired Retirement Age</label>
                        <input type="number" id="retirementAge" placeholder="e.g., 60" min="40" max="100">
                    </div>
                    <div class="input-group">
                        <label for="currentExpenses">Current Monthly Expenses (‚Çπ)</label>
                        <input type="number" id="currentExpenses" placeholder="e.g., 40000" min="5000">
                    </div>
                    <div class="input-group">
                        <label for="inflationRate">Expected Inflation Rate (%)</label>
                        <input type="number" id="inflationRate" placeholder="e.g., 6" step="0.1" min="1" value="6">
                    </div>
                    <button class="calculate-btn" onclick="calculateRetirement()">Plan My Retirement</button>
                    <div class="result empty" id="retirementResult">
                        Enter your details to see retirement planning strategy
                    </div>
                    <div class="chart-container" id="retirementChart" style="display: none;">
                        <canvas id="retirementChartCanvas"></canvas>
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>Future Expenses = Current Expenses √ó (1 + Inflation Rate)‚Åø</strong><br>
                        <strong>Required Corpus = Future Annual Expenses √ó 25 (4% withdrawal rule)</strong><br>
                        <strong>Monthly SIP = Corpus / [((1 + r)‚Åø - 1) / r]</strong><br>
                        Where: n = Years to retirement, r = Expected monthly return<br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.investopedia.com/terms/f/four-percent-rule.asp" target="_blank">4% Withdrawal Rule - Investopedia</a><br>
                        ‚Ä¢ <a href="https://www.morningstar.com/articles/1077881" target="_blank">Retirement Planning Research - Morningstar</a><br>
                        ‚Ä¢ <a href="https://www.pfrda.org.in/writereaddata/links/retirement%20planning%20guide4ce5d748-70dd-40c5-bed9-ee8bb2509f36.pdf" target="_blank">Retirement Planning Guide - PFRDA</a>
                    </div>
                </div>

                <div class="calculator-card">
                    <h2 class="calculator-title">
                        <span class="calculator-icon">üè°</span>
                        Home Purchase Planning
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Home Buying Financial Terms</div>
                        <strong>Down Payment:</strong> Upfront payment (typically 20% of property value) that reduces your loan amount.<br>
                        <strong>Property Appreciation:</strong> Rate at which property values increase over time.<br>
                        <strong>Loan-to-Value (LTV):</strong> Percentage of property value that the bank will finance (typically 80%).
                    </div>
                    <div class="input-group">
                        <label for="housePrice">Target House Price (‚Çπ)</label>
                        <input type="number" id="housePrice" placeholder="e.g., 5000000" min="500000">
                    </div>
                    <div class="input-group">
                        <label for="downPayment">Down Payment % (typically 20%)</label>
                        <input type="number" id="downPayment" placeholder="e.g., 20" min="10" max="100" value="20">
                    </div>
                    <div class="input-group">
                        <label for="yearsToBuy">Years to Buy</label>
                        <input type="number" id="yearsToBuy" placeholder="e.g., 5" min="1" max="20">
                    </div>
                    <div class="input-group">
                        <label for="propertyAppreciation">Expected Property Appreciation (%)</label>
                        <input type="number" id="propertyAppreciation" placeholder="e.g., 8" step="0.1" min="2" value="8">
                    </div>
                    <button class="calculate-btn" onclick="calculateHomePurchase()">Plan My Home Purchase</button>
                    <div class="result empty" id="homeResult">
                        Enter target house details to see your saving strategy
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>Future House Price = Current Price √ó (1 + Appreciation Rate)‚Åø</strong><br>
                        <strong>Down Payment = Future House Price √ó Down Payment %</strong><br>
                        <strong>Monthly Saving = Down Payment / [n √ó 12 √ó (1 + Savings Return Rate)]</strong><br>
                        <strong>Loan EMI = [Loan Amount √ó r √ó (1+r)‚Åø] / [(1+r)‚Åø - 1]</strong><br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.rbi.org.in/Scripts/BS_ViewMasCirculardetails.aspx?id=12270" target="_blank">RBI Home Loan Guidelines</a><br>
                        ‚Ä¢ <a href="https://www.investopedia.com/articles/pf/05/011705.asp" target="_blank">Home Buying Financial Planning - Investopedia</a><br>
                        ‚Ä¢ <a href="https://housing.com/news/home-loan-emi-calculator/" target="_blank">Home Loan EMI Calculation - Housing.com</a>
                    </div>
                </div>

                <div class="calculator-card">
                    <h2 class="calculator-title">
                        <span class="calculator-icon">üéì</span>
                        Child Education Planning
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Education Planning Terms</div>
                        Education costs in India rise fast‚Äîschool fees grow 6‚Äì8% annually, while higher education can inflate at 10‚Äì12%. Plan via SIPs that increase with your income (step-up SIP). Use education loans only to bridge gaps, since they come with repayment obligations.<br>
                    </div>
                    <div class="input-group">
                        <label for="childAge">Child's Current Age</label>
                        <input type="number" id="childAge" placeholder="e.g., 5" min="0" max="15">
                    </div>
                    <div class="input-group">
                        <label for="educationType">Education Type</label>
                        <select id="educationType">
                            <option value="">Select education type</option>
                            <option value="engineering">Engineering (‚Çπ15-25 lakhs)</option>
                            <option value="medical">Medical (‚Çπ20-50 lakhs)</option>
                            <option value="mba">MBA (‚Çπ20-40 lakhs)</option>
                            <option value="abroad">Study Abroad (‚Çπ50-100 lakhs)</option>
                            <option value="custom">Custom Amount</option>
                        </select>
                    </div>
                    <div class="input-group" id="customEducationCost" style="display: none;">
                        <label for="educationCost">Expected Education Cost Today (‚Çπ)</label>
                        <input type="number" id="educationCost" placeholder="e.g., 2000000" min="100000">
                    </div>
                    <div class="input-group">
                        <label for="educationInflation">Education Inflation Rate (%)</label>
                        <input type="number" id="educationInflation" placeholder="e.g., 10" step="0.1" min="5" value="10">
                    </div>
                    <button class="calculate-btn" onclick="calculateEducation()">Plan Education Fund</button>
                    <div class="result empty" id="educationResult">
                        Enter child's details to see education funding strategy
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>Future Education Cost = Current Cost √ó (1 + Education Inflation)‚Åø</strong><br>
                        <strong>Monthly SIP = Future Cost / [((1 + r)‚Åø - 1) / r]</strong><br>
                        <strong>Years to Education = 18 - Child's Current Age</strong><br>
                        Where: r = Expected monthly return, n = Number of months<br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.livemint.com/money/personal-finance/how-to-plan-for-your-child-s-education-11634735879186.html" target="_blank">Education Planning Guide - Mint</a><br>
                        ‚Ä¢ <a href="https://zerodha.com/varsity/chapter/child-education-planning/" target="_blank">Child Education Planning - Zerodha Varsity</a><br>
                        ‚Ä¢ <a href="https://www.ugc.ac.in/pdfnews/7553663_UGC-Annual-Report-2022-23.pdf" target="_blank">Education Cost Trends - UGC Report</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio Management Tab -->
        <div id="portfolio" class="tab-content">
            <div class="calculators-grid">
                <div class="advisor-card full-width">
                    <h2 class="advisor-title">
                        <span class="calculator-icon">üìã</span>
                        Portfolio Risk & Return Calculator
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Portfolio Management Concepts</div>
                        <strong>Asset Allocation:</strong> Spread money across different assets to balance risk and growth..<br>
                        <strong>Portfolio Risk (Volatility):</strong> How much your portfolio value can fluctuate.<br>
                        <strong>Sharpe Ratio:</strong> Extra return you get for each unit of risk taken ‚Äî higher is better.<br>
                        <strong>Correlation:</strong> Measures if assets move together. Lower correlation = stronger diversification.
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <div>
                            <h3 style="color: #64ffda; margin-bottom: 1rem;">Asset Allocation (%)</h3>
                            <div class="portfolio-weights">
                                <div class="weight-item">
                                    <div class="weight-label">Large Cap Funds</div>
                                    <input type="number" class="weight-input" id="largecap_weight" placeholder="40" min="0" max="100">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Mid Cap Funds</div>
                                    <input type="number" class="weight-input" id="midcap_weight" placeholder="30" min="0" max="100">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Small Cap Funds</div>
                                    <input type="number" class="weight-input" id="smallcap_weight" placeholder="15" min="0" max="100">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Debt Funds</div>
                                    <input type="number" class="weight-input" id="debt_weight" placeholder="10" min="0" max="100">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Gold/Commodities</div>
                                    <input type="number" class="weight-input" id="gold_weight" placeholder="5" min="0" max="100">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">International Funds</div>
                                    <input type="number" class="weight-input" id="international_weight" placeholder="0" min="0" max="100">
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 style="color: #64ffda; margin-bottom: 1rem;">Expected Returns (%)</h3>
                            <div class="portfolio-weights">
                                <div class="weight-item">
                                    <div class="weight-label">Large Cap Return</div>
                                    <input type="number" class="weight-input" id="largecap_return" placeholder="12" step="0.1" min="0">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Mid Cap Return</div>
                                    <input type="number" class="weight-input" id="midcap_return" placeholder="15" step="0.1" min="0">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Small Cap Return</div>
                                    <input type="number" class="weight-input" id="smallcap_return" placeholder="18" step="0.1" min="0">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Debt Return</div>
                                    <input type="number" class="weight-input" id="debt_return" placeholder="7" step="0.1" min="0">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">Gold Return</div>
                                    <input type="number" class="weight-input" id="gold_return" placeholder="8" step="0.1" min="0">
                                </div>
                                <div class="weight-item">
                                    <div class="weight-label">International Return</div>
                                    <input type="number" class="weight-input" id="international_return" placeholder="10" step="0.1" min="0">
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="analyze-btn" onclick="calculatePortfolio()">Calculate Portfolio Metrics</button>
                    <div class="advice empty" id="portfolioResult">
                        Enter your asset allocation and expected returns to see portfolio analysis
                    </div>
                    <div class="chart-container" id="portfolioChart" style="display: none;">
                        <canvas id="portfolioChartCanvas"></canvas>
                    </div>
                    <div class="data-sources">
                        <h4>Formula Reference:</h4>
                        <strong>Portfolio Return = Œ£(Weight_i √ó Return_i)</strong><br>
                        <strong>Portfolio Risk = ‚àö[Œ£(Weight_i¬≤ √ó œÉ_i¬≤) + 2Œ£Œ£(Weight_i √ó Weight_j √ó œÉ_i √ó œÉ_j √ó œÅ_ij)]</strong><br>
                        <strong>Sharpe Ratio = (Portfolio Return - Risk Free Rate) / Portfolio Standard Deviation</strong><br>
                        Where: œÉ = Standard Deviation, œÅ = Correlation Coefficient<br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.investopedia.com/terms/m/modernportfoliotheory.asp" target="_blank">Modern Portfolio Theory - Investopedia</a><br>
                        ‚Ä¢ <a href="https://www.cfainstitute.org/en/membership/professional-development/refresher-readings/portfolio-risk-return-part-i" target="_blank">Portfolio Risk & Return - CFA Institute</a><br>
                        ‚Ä¢ <a href="https://zerodha.com/varsity/chapter/correlation-and-portfolio-risk/" target="_blank">Portfolio Correlation - Zerodha Varsity</a><br>
                        ‚Ä¢ <a href="https://www.sebi.gov.in/sebi_data/attachdocs/1288344152188.pdf" target="_blank">SEBI Guidelines on Portfolio Management</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Insights Tab -->
        <div id="market" class="tab-content">
            <div class="calculators-grid">
                <div class="advisor-card full-width">
                    <h2 class="advisor-title">
                        <span class="calculator-icon">üìä</span>
                        Current Market Insights & Recommendations
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Market Analysis Terms</div>
                        <strong>Yield:</strong> Annual income return on an investment expressed as a percentage of its cost.<br>
                        <strong>P/E Ratio:</strong> Price-to-Earnings ratio indicating if stocks are expensive relative to earnings.<br>
                        <strong>Market Cap:</strong> Total value of a company's shares - Large Cap (>‚Çπ20,000 cr), Mid Cap (‚Çπ5,000-20,000 cr), Small Cap (<‚Çπ5,000 cr).<br>
                        <strong>Sectoral Rotation:</strong> Investment strategy of moving money between different industry sectors based on economic cycles.
                    </div>
                    <div class="market-data">
                        <div class="market-item">
                            <div class="market-value">8.5%</div>
                            <div class="market-label">Avg Home Loan Rate</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">6.5%</div>
                            <div class="market-label">FD Interest Rate</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">6.47%</div>
                            <div class="market-label">10Y Govt Bond Yield</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">8.05%</div>
                            <div class="market-label">RBI Floating Rate Bond</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">12-15%</div>
                            <div class="market-label">Equity Mutual Funds</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">7-9%</div>
                            <div class="market-label">Debt Mutual Funds</div>
                        </div>
                    </div>
                    
                    <div class="advice-section">
                        <div class="advice-title">üî• Top Performing Funds (2025)</div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Best Large Cap Funds <span class="risk-badge risk-medium">Medium Risk</span></div>
                            <p><strong>Top Picks:</strong> ICICI Prudential Bluechip Fund (22.26% 3Y returns), Nippon India Large Cap Fund (20.1% 3Y returns), ICICI Prudential Large Cap Fund (18.37% 3Y returns)</p>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Best Mid Cap Funds <span class="risk-badge risk-high">High Risk</span></div>
                            <p><strong>Top Picks:</strong> Nippon India Growth Fund (31.98% 3Y returns), Invesco India Mid Cap Fund (28.99% 3Y returns), Tata Midcap Growth Fund (27.41% 3Y returns)</p>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Best Small Cap Funds <span class="risk-badge risk-high">High Risk</span></div>
                            <p><strong>Top Picks:</strong> Quant Small Cap Fund (42.89% 5Y CAGR), Franklin India Smaller Companies Fund (35.24% 5Y returns), Nippon India Small Cap Fund (34.88% 5Y returns)</p>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Government Bonds Insight <span class="risk-badge risk-low">Low Risk</span></div>
                            <p><strong>Current Yield:</strong> 10-year Government Securities at 6.47%. RBI Floating Rate Savings Bonds at 8.05% (resets every 6 months). Ideal for conservative investors seeking steady income with sovereign guarantee.</p>
                        </div>
                    </div>

                    <div class="advice-section">
                        <div class="advice-title">‚ö†Ô∏è Market Alerts</div>
                        <p><strong>Interest Rate Trend:</strong> RBI maintaining steady rates. Government bond yields stable around 6.47% for 10-year securities.</p>
                        <p><strong>Equity Market:</strong> High valuations in large caps. Mid and small caps showing strong momentum but with increased volatility.</p>
                        <p><strong>Real Estate:</strong> Property prices rising in tier-2 cities. REITs offering 7-9% dividend yield as alternative exposure.</p>
                    </div>

                    <div class="data-sources">
                        <h4>Current Market Data Sources (August 2025):</h4>
                        ‚Ä¢ <a href="https://tradingeconomics.com/india/government-bond-yield" target="_blank">Government Bond Yields (6.47%) - Trading Economics</a><br>
                        ‚Ä¢ <a href="https://cleartax.in/s/rbi-floating-bond-interest-rates" target="_blank">RBI Floating Rate Bonds (8.05%) - ClearTax</a><br>
                        ‚Ä¢ <a href="https://groww.in/mutual-funds/category/best-large-cap-mutual-funds" target="_blank">Large Cap Fund Performance - Groww</a><br>
                        ‚Ä¢ <a href="https://groww.in/mutual-funds/category/best-mid-cap-mutual-funds" target="_blank">Mid Cap Fund Performance - Groww</a><br>
                        ‚Ä¢ <a href="https://groww.in/mutual-funds/category/best-small-cap-mutual-funds" target="_blank">Small Cap Fund Performance - Groww</a><br>
                        ‚Ä¢ <a href="https://www.indmoney.com/mutual-funds/equity/large-cap-funds" target="_blank">Fund Analysis & Rankings - INDmoney</a><br>
                        ‚Ä¢ <a href="https://www.rbi.org.in/Scripts/bs_viewcontent.aspx?Id=3270" target="_blank">Interest Rate Policy - Reserve Bank of India</a><br>
                        ‚Ä¢ <a href="https://www.sebi.gov.in/sebiweb/home/HomeAction.do?doListing=yes&sid=1&ssid=18&smid=0" target="_blank">Mutual Fund Regulations - SEBI</a><br>
                        <em>Note: Data refreshed monthly. Performance figures based on historical returns and subject to market risks.</em>
                    </div>
                </div>
            </div>
        </div>

        <!-- Credit Building Tab -->
        <div id="credit" class="tab-content">
            <div class="calculators-grid">
                <div class="advisor-card full-width">
                    <h2 class="advisor-title">
                        <span class="calculator-icon">üí≥</span>
                        Credit Score Building & Management
                    </h2>
                    <div class="definition-box">
                        <div class="definition-title">Credit Score Fundamentals</div>
                        <strong>Credit Score:</strong> A 3-digit number (300-900) representing your creditworthiness based on your credit history.<br>
                        <strong>CIBIL Score:</strong> India's most widely used credit score, calculated by Credit Information Bureau India Limited.<br>
                        <strong>Credit Utilization Ratio:</strong> Percentage of available credit limit you're using - keep below 30% for good score.<br>
                        <strong>Credit History Length:</strong> How long you've been using credit - longer history generally means better score.
                    </div>
                    
                    <div class="credit-score-range">
                        <div class="score-item score-excellent">
                            <div class="market-value">750-900</div>
                            <div class="market-label">Excellent Credit</div>
                        </div>
                        <div class="score-item score-good">
                            <div class="market-value">700-749</div>
                            <div class="market-label">Good Credit</div>
                        </div>
                        <div class="score-item score-fair">
                            <div class="market-value">650-699</div>
                            <div class="market-label">Fair Credit</div>
                        </div>
                        <div class="score-item score-poor">
                            <div class="market-value">600-649</div>
                            <div class="market-label">Poor Credit</div>
                        </div>
                        <div class="score-item score-bad">
                            <div class="market-value">300-599</div>
                            <div class="market-label">Bad Credit</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="currentCreditScore">Current Credit Score (if known)</label>
                        <input type="number" id="currentCreditScore" placeholder="e.g., 720" min="300" max="900">
                    </div>
                    <div class="input-group">
                        <label for="creditCardLimit">Total Credit Card Limit (‚Çπ)</label>
                        <input type="number" id="creditCardLimit" placeholder="e.g., 200000" min="0">
                    </div>
                    <div class="input-group">
                        <label for="creditCardUsage">Monthly Credit Card Usage (‚Çπ)</label>
                        <input type="number" id="creditCardUsage" placeholder="e.g., 50000" min="0">
                    </div>
                    <div class="input-group">
                        <label for="creditAge">Credit History Age (Years)</label>
                        <input type="number" id="creditAge" placeholder="e.g., 3" min="0" max="30">
                    </div>
                    <div class="input-group">
                        <label for="paymentHistory">Payment History</label>
                        <select id="paymentHistory">
                            <option value="">Select payment track record</option>
                            <option value="excellent">Always pay on time (100%)</option>
                            <option value="good">Mostly on time (90-99%)</option>
                            <option value="fair">Sometimes late (80-89%)</option>
                            <option value="poor">Often late (below 80%)</option>
                        </select>
                    </div>
                    <button class="analyze-btn" onclick="analyzeCreditProfile()">Analyze My Credit Profile</button>
                    <div class="advice empty" id="creditResult">
                        Enter your credit details to get personalized credit building strategy
                    </div>

                    <div class="advice-section">
                        <div class="advice-title">üöÄ Credit Building Action Plan</div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Phase 1: Foundation Building (0-6 months)</div>
                            <p><strong>Get Your First Credit Card:</strong> Start with secured credit card if no credit history. Use 10-30% of limit monthly and pay in full before due date.</p>
                            <p><strong>Set Up Auto-Pay:</strong> Never miss payment dates - 35% of your score depends on payment history.</p>
                            <p><strong>Monitor Credit Report:</strong> Get free annual credit report from CIBIL, Experian, Equifax, or CRIF High Mark.</p>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Phase 2: Score Optimization (6-18 months)</div>
                            <p><strong>Multiple Credit Types:</strong> Add personal loan, auto loan, or education loan to show mixed credit handling capability.</p>
                            <p><strong>Credit Limit Increases:</strong> Request limit increases every 6 months to improve credit utilization ratio.</p>
                            <p><strong>Maintain Old Cards:</strong> Keep your oldest credit card active - length of credit history matters (15% of score).</p>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Phase 3: Advanced Strategies (18+ months)</div>
                            <p><strong>Premium Cards:</strong> Upgrade to premium credit cards once score crosses 750 for better rewards and higher limits.</p>
                            <p><strong>Business Credit:</strong> Consider business credit cards to separate personal and business expenses.</p>
                            <p><strong>Credit Monitoring:</strong> Use apps like CRED, Payme, or Paisabazaar for ongoing score tracking.</p>
                        </div>
                    </div>

                    <div class="data-sources">
                        <h4>Credit Score Factors & Weightage:</h4>
                        ‚Ä¢ <strong>Payment History (35%):</strong> Most important factor - never miss payments<br>
                        ‚Ä¢ <strong>Credit Utilization (30%):</strong> Keep below 30% of total credit limit<br>
                        ‚Ä¢ <strong>Credit History Length (15%):</strong> Longer history is better<br>
                        ‚Ä¢ <strong>Credit Mix (10%):</strong> Different types of credit (cards, loans)<br>
                        ‚Ä¢ <strong>New Credit Inquiries (10%):</strong> Limit hard inquiries to 2-3 per year<br><br>
                        <strong>References:</strong><br>
                        ‚Ä¢ <a href="https://www.cibil.com/credit-score-range" target="_blank">CIBIL Score Ranges - TransUnion CIBIL</a><br>
                        ‚Ä¢ <a href="https://www.rbi.org.in/Scripts/BS_SpeechesView.aspx?Id=1044" target="_blank">Credit Information System - RBI</a><br>
                        ‚Ä¢ <a href="https://www.experian.in/blogs/ask-experian/credit-education/score-basics/credit-score-factors/" target="_blank">Credit Score Factors - Experian</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5-Year Freshie Guide Tab -->
        <div id="freshie" class="tab-content">
            <div class="advisor-card full-width">
                <h2 class="advisor-title">
                    <span class="calculator-icon">üéì</span>
                    Five-Year Fresher's Investment Guide
                </h2>
                <div class="definition-box">
                    <div class="definition-title">Fresh Graduate Financial Terms</div>
                    <strong>Take-Home Salary:</strong> Salary after tax deductions (TDS) and other statutory deductions like PF and ESI.<br>
                    <strong>CTC (Cost to Company):</strong> Total salary package including all benefits - your actual in-hand salary will be 70-80% of CTC.<br>
                    <strong>Emergency Fund:</strong> 6-12 months of expenses kept in easily accessible form for unexpected situations.<br>
                    <strong>Tax-Saving Investments:</strong> Investments under Section 80C (ELSS, PPF, EPF) that reduce your taxable income.
                </div>

                <div class="year-plan">
                    <div class="year-header">Year 1 ‚Äì Build Your Foundation</div>
                    <div class="year-goals">
                        <div class="goal-category">
                            <div class="goal-title">Focus on emergency savings</div>
                            <p>Establish a safety net covering at least 3-6 months of your living expenses before considering any investments.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Prioritize insurance coverage</div>
                            <p>Secure comprehensive health insurance and term life insurance if you have dependents to protect your financial foundation.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Avoid rushing into complex investments</div>
                            <p>Financial stability and understanding fundamentals should take priority over chasing immediate returns.</p>
                        </div>
                    </div>
                </div>

                <div class="year-plan">
                    <div class="year-header">Year 2 ‚Äì Enter the Market Cautiously</div>
                    <div class="year-goals">
                        <div class="goal-category">
                            <div class="goal-title">Begin with low-risk instruments</div>
                            <p>Start your investment journey through systematic investment plans (SIPs) in index funds and blue-chip mutual funds.</p>
                            <p>Resist the temptation to chase aggressive equity returns during this learning phase.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Start small but consistent SIPs</div>
                            <p>Focus on developing investment discipline through regular, manageable contributions rather than large amounts.</p>
                        </div>
                    </div>
                </div>

                <div class="year-plan">
                    <div class="year-header">Year 3 ‚Äì Grow With Balanced Exposure</div>
                    <div class="year-goals">
                        <div class="goal-category">
                            <div class="goal-title">Gradually increase equity allocation</div>
                            <p>Expand your risk tolerance and equity exposure as your market understanding and confidence develop.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Maintain portfolio diversification</div>
                            <p>Structure your investments with 60-70% in equity funds (combining large and mid-cap options), 20-30% in debt funds or fixed income securities, and allocate the remainder to gold or REITs for portfolio stability.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Resist fear of missing out</div>
                            <p>Prioritize consistent investment habits over attempting to capture quick market gains.</p>
                        </div>
                    </div>
                </div>

                <div class="year-plan">
                    <div class="year-header">Year 4 ‚Äì Optimize & Explore</div>
                    <div class="year-goals">
                        <div class="goal-category">
                            <div class="goal-title">Review and rebalance your portfolio</div>
                            <p>Conduct annual portfolio assessments to ensure your allocation remains aligned with your goals and risk tolerance.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Explore advanced investment instruments</div>
                            <p>Diversify into equity-linked savings schemes (ELSS) for tax benefits, exchange-traded funds (ETFs), and international index funds.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Align investments with medium-term objectives</div>
                            <p>Structure your portfolio to support specific goals such as higher education, vehicle purchases, or other major expenses.</p>
                        </div>
                    </div>
                </div>

                <div class="year-plan">
                    <div class="year-header">Year 5 ‚Äì Embrace Long-Term Thinking</div>
                    <div class="year-goals">
                        <div class="goal-category">
                            <div class="goal-title">Investing should become second nature</div>
                            <p>By this stage, regular investing should be an established habit requiring minimal conscious effort or decision-making.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Maximize equity exposure strategically</div>
                            <p>Leverage your youth and extended time horizon by allocating 70-80% to equity investments, capitalizing on your natural risk capacity.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Establish major wealth-building targets</div>
                            <p>Define substantial financial milestones such as home down payments and retirement corpus accumulation.</p>
                        </div>
                        <div class="goal-category">
                            <div class="goal-title">Implement systematic automation</div>
                            <p>Set up automated SIP contributions and develop the discipline to avoid emotional decision-making during market volatility.</p>
                        </div>
                    </div>
                </div>

                <div class="advice-section">
                    <div class="advice-title">Golden Rules Across All 5 Years</div>
                    <div class="recommendation-card">
                        <div class="recommendation-title">Control lifestyle inflation</div>
                        <p>Resist the tendency to increase unnecessary expenses proportionally with income growth, maintaining your savings rate as earnings rise.</p>
                    </div>
                    <div class="recommendation-card">
                        <div class="recommendation-title">Maintain investment discipline</div>
                        <p>Small, consistent investments compound dramatically over time, creating substantial wealth through patience and persistence.</p>
                    </div>
                    <div class="recommendation-card">
                        <div class="recommendation-title">Conduct regular reviews without over-management</div>
                        <p>Adapt your investment strategy annually based on changing circumstances, but avoid the counterproductive habit of constant portfolio adjustments.</p>
                    </div>
                </div>

                <div class="data-sources">
                    <h4>Fresh Graduate Financial Resources:</h4>
                    ‚Ä¢ <a href="https://zerodha.com/varsity/" target="_blank">Complete Finance Education - Zerodha Varsity</a><br>
                    ‚Ä¢ <a href="https://www.livemint.com/money/personal-finance" target="_blank">Personal Finance News - LiveMint</a><br>
                    ‚Ä¢ <a href="https://cleartax.in/s/income-tax-slabs" target="_blank">Tax Planning Guide - ClearTax</a><br>
                    ‚Ä¢ <a href="https://www.amfiindia.com/investor-corner/knowledge-center" target="_blank">Mutual Fund Basics - AMFI</a><br>
                    ‚Ä¢ <a href="https://www.nsdl.co.in/pan-aadhaar-link/index.php" target="_blank">PAN-Aadhaar Linking - NSDL</a>
                </div>
            </div>
        </div>

        <div class="tips">
            <h3>üí° Smart Money Tips</h3>
            <div class="tips-grid">
                <div class="tip-item">
                    <strong>50-30-20 Rule - Foundation of Budgeting:</strong>
                    Allocate 50% of income to needs (rent, groceries, utilities), 30% to wants (dining, entertainment), and 20% to savings & investments. This simple rule ensures balanced financial health and sustainable spending habits.
                </div>
                <div class="tip-item">
                    <strong>Asset Allocation by Age:</strong>
                    In your 20s, prioritise growth (70‚Äì80% equity, 20‚Äì30% debt/fixed income). In your 30s, shift to a 60‚Äì70% equity to 30‚Äì40% debt ratio. In your 40s, gradually shift to 50‚Äì60% equity, with the remaining portion in debt and safer assets. Adjust allocation based on risk appetite and retirement goals, not age alone.
                </div>
                <div class="tip-item">
                    <strong>Emergency Fund Rule:</strong>
                    Keep 6-12 months expenses in liquid funds or savings account. This should be your first financial goal before any investments. Emergency fund protects you from debt during unexpected situations.
                </div>
                <div class="tip-item">
                    <strong>Tax-Saving Strategy:</strong>
                    Use ELSS, PPF, EPF, and NPS to save up to ‚Çπ2 lakh in taxes annually under various sections. ELSS offers market-linked returns with 3-year lock-in period, making it ideal for young investors.
                </div>
                <div class="tip-item">
                    <strong>SIP Power & Growth:</strong>
                    Start SIP with ‚Çπ500/month. Incrementally increase the monthly amount by 10-15% year-on-year as your income grows. This step-up approach accelerates wealth creation through rupee cost averaging and compound growth.
                </div>
                <div class="tip-item">
                    <strong>Debt Management:</strong>
                    Pay off high-interest debt (credit cards: 36-42% APR) first. If loan interest > expected returns, prepay the loan rather than investing. Good debt (home loans, education loans) can coexist with investments.
                </div>
                <div class="tip-item">
                    <strong>Insurance Rule:</strong>
                    Term life insurance = 10-15x annual income. Health insurance = ‚Çπ5-10 lakhs minimum per family member. Don't mix insurance with investment - keep them separate for better returns.
                </div>
                <div class="tip-item">
                    <strong>Government Bonds Strategy:</strong>
                    RBI Floating Rate Bonds (currently ~8.05%) offer inflation protection with 6-month resets and a sovereign guarantee. Ideal for conservative investors seeking steady income. However, interest is fully taxable at your slab rate
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Smart Financial Assistant. Comprehensive financial planning for everyone.</p>
            <div class="creator-info">
                <p><strong>Disclaimer:</strong> This tool is for educational purposes only. All calculations use standard financial formulas and current market data. Consult a qualified financial advisor for personalized investment advice. | 
                <a href="mailto:yuvikaagrawal04@gmail.com">yuvikaagrawal04@gmail.com</a> | 
                <a href="https://www.linkedin.com/in/yuvikaagrawal04" target="_blank">Yuvika's LinkedIn</a> | 
                <a href="mailto:manav.sridhar@flame.edu.in">manav.sridhar@flame.edu.in</a> | 
                <a href="https://www.linkedin.com/in/manav-sridhar/" target="_blank">Manav's LinkedIn</a></p>
                <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                    üöÄ Built with authentic financial formulas and real market data ‚Ä¢ All sources referenced and linked
                </p>
                <div style="margin-top: 1rem; font-size: 0.8rem; color: #8892b0;">
                    <strong>Key References:</strong><br>
                    ‚Ä¢ <a href="https://www.rbi.org.in/" target="_blank">Reserve Bank of India (RBI)</a> - Monetary Policy & Interest Rates<br>
                    ‚Ä¢ <a href="https://www.sebi.gov.in/" target="_blank">Securities and Exchange Board of India (SEBI)</a> - Mutual Fund Regulations<br>
                    ‚Ä¢ <a href="https://www.amfiindia.com/" target="_blank">Association of Mutual Funds in India (AMFI)</a> - Industry Standards<br>
                    ‚Ä¢ <a href="https://www.nseindia.com/" target="_blank">National Stock Exchange (NSE)</a> & <a href="https://www.bseindia.com/" target="_blank">Bombay Stock Exchange (BSE)</a> - Market Data<br>
                    ‚Ä¢ <a href="https://math.stackexchange.com/questions/279844/how-the-formula-for-emi-is-derived" target="_blank">Mathematical Foundations</a> - Formula Derivations
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                maximumFractionDigits: 0
            }).format(amount);
        }

        function createChart(canvasId, type, data, options = {}) {
            const canvas = document.getElementById(canvasId);
            if (canvas.chart) {
                canvas.chart.destroy();
            }
            
            const ctx = canvas.getContext('2d');
            canvas.chart = new Chart(ctx, {
                type: type,
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e6ed'
                            }
                        }
                    },
                    scales: type !== 'doughnut' && type !== 'pie' ? {
                        x: {
                            ticks: { color: '#8892b0' },
                            grid: { color: 'rgba(100, 255, 218, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#8892b0' },
                            grid: { color: 'rgba(100, 255, 218, 0.1)' }
                        }
                    } : {},
                    ...options
                }
            });
        }

        // Authentic EMI calculation using the standard mathematical formula
        function calculateEMI() {
            const loanAmount = parseFloat(document.getElementById('loanAmount').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const loanTenure = parseFloat(document.getElementById('loanTenure').value);
            
            if (!loanAmount || !interestRate || !loanTenure) {
                document.getElementById('emiResult').innerHTML = 'Please fill all fields';
                document.getElementById('emiResult').className = 'result empty';
                document.getElementById('emiChart').style.display = 'none';
                return;
            }
            
            // Convert annual rate to monthly and percentage to decimal
            const monthlyRate = interestRate / (12 * 100);
            const numberOfPayments = loanTenure * 12;
            
            // Standard EMI formula: EMI = [P √ó r √ó (1+r)^n] / [(1+r)^n - 1]
            const emi = (loanAmount * monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                       (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            
            const totalAmount = emi * numberOfPayments;
            const totalInterest = totalAmount - loanAmount;
            
            document.getElementById('emiResult').innerHTML = 
                `<strong>Monthly EMI: ${formatCurrency(emi)}</strong><br>
                Total Interest: ${formatCurrency(totalInterest)}<br>
                Total Amount: ${formatCurrency(totalAmount)}<br><br>
                <div class="advice-section">
                <div class="advice-title">üí° EMI Optimization Tips</div>
                ${emi > loanAmount * 0.004 ? 
                    '‚ö†Ô∏è EMI is high (>40% of loan amount annually). Consider longer tenure or higher down payment.' : 
                    '‚úÖ EMI looks manageable for your loan amount.'}<br>
                ${totalInterest > loanAmount * 0.8 ? 
                    'üí∞ Consider prepaying ‚Çπ' + formatCurrency(Math.floor((totalInterest - loanAmount * 0.5) / numberOfPayments)) + '/month to save lakhs in interest.' : 
                    'üëç Interest amount is reasonable for this tenure.'}
                </div>`;
            document.getElementById('emiResult').className = 'result calculated';
            
            // Create EMI breakdown chart
            document.getElementById('emiChart').style.display = 'block';
            createChart('emiChartCanvas', 'doughnut', {
                labels: ['Principal Amount', 'Total Interest'],
                datasets: [{
                    data: [loanAmount, totalInterest],
                    backgroundColor: ['#64ffda', '#ff6b6b'],
                    borderColor: ['#4fc3f7', '#ff5252'],
                    borderWidth: 2
                }]
            });
        }

        function calculateInvestment() {
            const principal = parseFloat(document.getElementById('principal').value) || 0;
            const sipAmount = parseFloat(document.getElementById('sipAmount').value) || 0;
            const returnRate = parseFloat(document.getElementById('returnRate').value);
            const timePeriod = parseFloat(document.getElementById('timePeriod').value);
            
            if (!returnRate || !timePeriod) {
                document.getElementById('investmentResult').innerHTML = 'Please fill required fields';
                document.getElementById('investmentResult').className = 'result empty';
                document.getElementById('investmentChart').style.display = 'none';
                return;
            }
            
            const monthlyRate = returnRate / (12 * 100);
            const months = timePeriod * 12;
            
            // Future value of lump sum: FV = PV(1+r)^n
            const futureValueLumpSum = principal * Math.pow(1 + returnRate/100, timePeriod);
            
            // Future value of SIP: FV = PMT √ó [((1+r)^n - 1) / r]
            let futureValueSIP = 0;
            if (sipAmount > 0) {
                futureValueSIP = sipAmount * (Math.pow(1 + monthlyRate, months) - 1) / monthlyRate;
            }
            
            const totalFutureValue = futureValueLumpSum + futureValueSIP;
            const totalInvestment = principal + (sipAmount * months);
            const totalGains = totalFutureValue - totalInvestment;
            
            // Investment advice based on returns
            let advice = '';
            const effectiveRate = ((totalFutureValue / totalInvestment) ** (1/timePeriod) - 1) * 100;
            
            if (returnRate < 8) {
                advice = '‚ö†Ô∏è Expected return is low. Consider equity mutual funds for better long-term growth.';
            } else if (returnRate > 15) {
                advice = 'üö® Expected return seems optimistic. Be realistic with expectations (10-12% is more reasonable).';
            } else {
                advice = '‚úÖ Expected return looks reasonable for a diversified portfolio.';
            }
            
            document.getElementById('investmentResult').innerHTML = 
                `<strong>Future Value: ${formatCurrency(totalFutureValue)}</strong><br>
                Total Investment: ${formatCurrency(totalInvestment)}<br>
                Total Gains: ${formatCurrency(totalGains)}<br>
                Effective Return: ${effectiveRate.toFixed(1)}% per annum<br><br>
                <div class="advice-section">
                <div class="advice-title">üìà Investment Insights</div>
                ${advice}<br>
                ${totalGains > totalInvestment ? 
                    'üéâ Excellent! Your money will more than double with compound growth.' :
                    'üí™ Keep investing regularly to harness the power of compounding.'}
                </div>`;
            document.getElementById('investmentResult').className = 'result calculated';
            
            // Create investment growth chart
            document.getElementById('investmentChart').style.display = 'block';
            const years = [];
            const investmentValues = [];
            const gainValues = [];
            
            for (let year = 1; year <= timePeriod; year++) {
                years.push(`Year ${year}`);
                const yearlyInvestment = principal + (sipAmount * year * 12);
                const yearlyFutureValue = (principal * Math.pow(1 + returnRate/100, year)) + 
                    (sipAmount > 0 ? sipAmount * (Math.pow(1 + monthlyRate, year * 12) - 1) / monthlyRate : 0);
                investmentValues.push(yearlyInvestment);
                gainValues.push(yearlyFutureValue - yearlyInvestment);
            }
            
            createChart('investmentChartCanvas', 'line', {
                labels: years,
                datasets: [{
                    label: 'Total Investment',
                    data: investmentValues,
                    borderColor: '#64ffda',
                    backgroundColor: 'rgba(100, 255, 218, 0.1)',
                    tension: 0.1
                }, {
                    label: 'Total Gains',
                    data: gainValues,
                    borderColor: '#4fc3f7',
                    backgroundColor: 'rgba(79, 195, 247, 0.1)',
                    tension: 0.1
                }]
            });
        }

        function calculateBudget() {
            const income = parseFloat(document.getElementById('monthlyIncome').value);
            const essential = parseFloat(document.getElementById('essentialExpenses').value) || 0;
            const discretionary = parseFloat(document.getElementById('discretionaryExpenses').value) || 0;
            
            if (!income) {
                document.getElementById('budgetResult').innerHTML = 'Please enter your monthly income';
                document.getElementById('budgetResult').className = 'result empty';
                document.getElementById('budgetChart').style.display = 'none';
                return;
            }
            
            const totalExpenses = essential + discretionary;
            const surplus = income - totalExpenses;
            const savingsRate = (surplus / income) * 100;
            const essentialPercent = (essential / income) * 100;
            const discretionaryPercent = (discretionary / income) * 100;
            
            let analysis = '';
            let budgetAdvice = '';
            
            if (surplus > 0) {
                analysis = `<strong>Monthly Surplus: ${formatCurrency(surplus)}</strong><br>
                           Savings Rate: ${savingsRate.toFixed(1)}%<br>
                           Essential: ${essentialPercent.toFixed(1)}% | Discretionary: ${discretionaryPercent.toFixed(1)}%<br><br>`;
                
                if (savingsRate >= 30) {
                    budgetAdvice = 'üéâ Excellent savings rate! You\'re on track for early financial independence.';
                } else if (savingsRate >= 20) {
                    budgetAdvice = '‚úÖ Great savings rate! Consider increasing investments in equity mutual funds.';
                } else if (savingsRate >= 10) {
                    budgetAdvice = 'üëç Good start! Try to increase savings to 20% by reducing discretionary expenses.';
                } else {
                    budgetAdvice = '‚ö†Ô∏è Low savings rate. Focus on cutting discretionary expenses and increasing income.';
                }
                
                if (essentialPercent > 60) {
                    budgetAdvice += '<br>üí° Essential expenses are high. Look for ways to optimize housing, food, and transport costs.';
                }
            } else {
                analysis = `<strong>Monthly Deficit: ${formatCurrency(Math.abs(surplus))}</strong><br>
                           ‚ùå Expenses exceed income<br><br>`;
                budgetAdvice = 'üö® Urgent: Reduce expenses or increase income. Start with discretionary spending cuts.';
            }
            
            document.getElementById('budgetResult').innerHTML = 
                analysis + 
                `<div class="advice-section">
                <div class="advice-title">üí∞ Budget Optimization</div>
                ${budgetAdvice}<br><br>
                <strong>50-30-20 Rule Allocation:</strong><br>
                ‚Ä¢ Needs (50%): ${formatCurrency(income * 0.5)}<br>
                ‚Ä¢ Wants (30%): ${formatCurrency(income * 0.3)}<br>
                ‚Ä¢ Savings/Investment (20%): ${formatCurrency(income * 0.2)}
                </div>`;
            document.getElementById('budgetResult').className = 'result calculated';
            
            // Create budget breakdown chart
            document.getElementById('budgetChart').style.display = 'block';
            createChart('budgetChartCanvas', 'doughnut', {
                labels: ['Essential Expenses', 'Discretionary Expenses', 'Savings'],
                datasets: [{
                    data: [essential, discretionary, surplus > 0 ? surplus : 0],
                    backgroundColor: ['#ff6b6b', '#feca57', '#64ffda'],
                    borderColor: ['#ff5252', '#ff9f43', '#4fc3f7'],
                    borderWidth: 2
                }]
            });
        }

        function generatePersonalizedAdvice() {
            const age = parseInt(document.getElementById('age').value);
            const income = parseFloat(document.getElementById('income').value);
            const investmentAmount = parseFloat(document.getElementById('investmentAmount').value);
            const riskTolerance = document.getElementById('riskTolerance').value;
            const investmentGoal = document.getElementById('investmentGoal').value;
            const timeHorizon = document.getElementById('timeHorizon').value;
            const currentSavings = parseFloat(document.getElementById('currentSavings').value) || 0;
            const hasEmergencyFund = document.getElementById('hasEmergencyFund').value;
            
            if (!age || !income || !investmentAmount || !riskTolerance || !investmentGoal || !timeHorizon) {
                document.getElementById('personalizedAdvice').innerHTML = 'Please fill all required fields to get personalized advice';
                document.getElementById('personalizedAdvice').className = 'advice empty';
                return;
            }
            
            let advice = `<div class="advice-section">
                <div class="advice-title">üéØ Your Personalized Investment Plan</div>
                <strong>Profile:</strong> ${age} years old, ‚Çπ${formatCurrency(income)} monthly income, ${riskTolerance} risk tolerance<br>
                <strong>Goal:</strong> ${investmentGoal.charAt(0).toUpperCase() + investmentGoal.slice(1)} over ${timeHorizon} term<br><br>`;
            
            // Emergency fund check
            if (hasEmergencyFund === 'no') {
                advice += `<div class="recommendation-card">
                    <div class="recommendation-title">üö® Priority #1: Emergency Fund</div>
                    <p>Build ${formatCurrency(income * 6)} emergency fund first. Keep in liquid funds or high-yield savings. Allocate ‚Çπ${formatCurrency(Math.min(investmentAmount * 0.5, income * 0.15))} monthly until complete.</p>
                </div>`;
            }
            
            // Asset allocation based on age and risk
            let equityPercent, debtPercent, equityAmount, debtAmount;
            
            if (age <= 30) {
                equityPercent = riskTolerance === 'aggressive' ? 85 : riskTolerance === 'moderate' ? 75 : 60;
            } else if (age <= 40) {
                equityPercent = riskTolerance === 'aggressive' ? 75 : riskTolerance === 'moderate' ? 65 : 50;
            } else {
                equityPercent = riskTolerance === 'aggressive' ? 65 : riskTolerance === 'moderate' ? 55 : 40;
            }
            
            debtPercent = 100 - equityPercent;
            equityAmount = investmentAmount * (equityPercent / 100);
            debtAmount = investmentAmount * (debtPercent / 100);
            
            advice += `<div class="recommendation-card">
                <div class="recommendation-title">üìä Recommended Asset Allocation</div>
                <div style="margin: 1rem 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Equity (${equityPercent}%)</span>
                        <span>${formatCurrency(equityAmount)}/month</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${equityPercent}%"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Debt (${debtPercent}%)</span>
                        <span>${formatCurrency(debtAmount)}/month</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${debtPercent}%"></div>
                    </div>
                </div>
            </div>`;
            
            // Specific fund recommendations based on 2025 data
            advice += `<div class="recommendation-card">
                <div class="recommendation-title">üéØ Specific Fund Recommendations (2025 Top Performers)</div>
                <strong>Equity Allocation (${formatCurrency(equityAmount)}/month):</strong><br>
                ‚Ä¢ <strong>Large Cap (40%):</strong> ICICI Prudential Bluechip Fund (‚Çπ${formatCurrency(equityAmount * 0.4)}) - 22.26% 3Y returns<br>
                ‚Ä¢ <strong>Mid Cap (35%):</strong> Nippon India Growth Fund (‚Çπ${formatCurrency(equityAmount * 0.35)}) - 31.98% 3Y returns<br>
                ‚Ä¢ <strong>Small Cap (25%):</strong> Quant Small Cap Fund (‚Çπ${formatCurrency(equityAmount * 0.25)}) - 42.89% 5Y CAGR<br><br>
                <strong>Debt Allocation (${formatCurrency(debtAmount)}/month):</strong><br>
                ‚Ä¢ <strong>Liquid Fund (60%):</strong> ‚Çπ${formatCurrency(debtAmount * 0.6)} <span class="risk-badge risk-low">Low Risk</span><br>
                ‚Ä¢ <strong>Govt/Corporate Bond (40%):</strong> ‚Çπ${formatCurrency(debtAmount * 0.4)} - Consider RBI Floating Rate Bonds at 8.05%
            </div>`;
            
            // Goal-specific advice
            let goalAdvice = '';
            switch(investmentGoal) {
                case 'retirement':
                    const retirementCorpus = investmentAmount * 12 * (65 - age) * 1.12;
                    goalAdvice = `Target retirement corpus: ${formatCurrency(retirementCorpus)}. Increase SIP by 10-15% annually. Consider NPS for additional tax benefits.`;
                    break;
                case 'house':
                    goalAdvice = `For home purchase, keep 20% in liquid funds for down payment flexibility. Current home loan rates at 8.5%. Consider debt funds for stability.`;
                    break;
                case 'education':
                    goalAdvice = `Education costs rise 10-12% annually. Start early and consider child-specific education funds. Increase allocation as child grows.`;
                    break;
                case 'travel':
                    goalAdvice = `For travel goals, lean towards debt funds in final 2 years to reduce volatility. Consider travel-specific recurring deposits.`;
                    break;
                case 'emergency':
                    goalAdvice = `Focus on liquid funds and ultra-short duration funds. Target 6-12 months of expenses. Avoid equity for emergency funds.`;
                    break;
                case 'wealth':
                    goalAdvice = `Perfect age for wealth creation! Focus on growth assets. Consider ELSS for tax saving. Review and rebalance annually.`;
                    break;
            }
            
            advice += `<div class="recommendation-card">
                <div class="recommendation-title">üéØ Goal-Specific Strategy</div>
                <p>${goalAdvice}</p>
            </div>`;
            
            // Tax optimization
            if (income > 25000) {
                advice += `<div class="recommendation-card">
                    <div class="recommendation-title">üí∞ Tax Optimization</div>
                    ‚Ä¢ ELSS Funds: ‚Çπ${Math.min(12500, investmentAmount * 0.3)}/month (80C deduction)<br>
                    ‚Ä¢ NPS: ‚Çπ${Math.min(4167, investmentAmount * 0.2)}/month (additional 80CCD deduction)<br>
                    ‚Ä¢ Potential tax saving: ‚Çπ${formatCurrency(Math.min(62500, investmentAmount * 6))}/year
                </div>`;
            }
            
            advice += `</div>`;
            
            document.getElementById('personalizedAdvice').innerHTML = advice;
            document.getElementById('personalizedAdvice').className = 'advice generated';
        }

        function calculatePortfolio() {
            // Get weights
            const weights = {
                largecap: parseFloat(document.getElementById('largecap_weight').value) || 0,
                midcap: parseFloat(document.getElementById('midcap_weight').value) || 0,
                smallcap: parseFloat(document.getElementById('smallcap_weight').value) || 0,
                debt: parseFloat(document.getElementById('debt_weight').value) || 0,
                gold: parseFloat(document.getElementById('gold_weight').value) || 0,
                international: parseFloat(document.getElementById('international_weight').value) || 0
            };

            // Get expected returns
            const returns = {
                largecap: parseFloat(document.getElementById('largecap_return').value) || 0,
                midcap: parseFloat(document.getElementById('midcap_return').value) || 0,
                smallcap: parseFloat(document.getElementById('smallcap_return').value) || 0,
                debt: parseFloat(document.getElementById('debt_return').value) || 0,
                gold: parseFloat(document.getElementById('gold_return').value) || 0,
                international: parseFloat(document.getElementById('international_return').value) || 0
            };

            // Check if weights sum to 100%
            const totalWeight = Object.values(weights).reduce((sum, weight) => sum + weight, 0);
            
            if (totalWeight === 0) {
                document.getElementById('portfolioResult').innerHTML = 'Please enter asset allocation weights';
                document.getElementById('portfolioResult').className = 'advice empty';
                document.getElementById('portfolioChart').style.display = 'none';
                return;
            }

            if (Math.abs(totalWeight - 100) > 0.1) {
                document.getElementById('portfolioResult').innerHTML = `‚ö†Ô∏è Weights sum to ${totalWeight.toFixed(1)}%. Please adjust to total 100%.`;
                document.getElementById('portfolioResult').className = 'advice empty';
                document.getElementById('portfolioChart').style.display = 'none';
                return;
            }

            // Calculate weighted average return: Portfolio Return = Œ£(Weight_i √ó Return_i)
            const portfolioReturn = Object.keys(weights).reduce((sum, asset) => {
                return sum + (weights[asset] / 100) * returns[asset];
            }, 0);

            // Estimate portfolio risk using historical volatilities
            const volatilities = {
                largecap: 15,    // Large cap historical volatility ~15%
                midcap: 22,      // Mid cap historical volatility ~22%
                smallcap: 28,    // Small cap historical volatility ~28%
                debt: 4,         // Debt funds volatility ~4%
                gold: 20,        // Gold volatility ~20%
                international: 18 // International funds volatility ~18%
            };

            // Simplified portfolio risk calculation (assuming some correlation)
            // Portfolio Risk = ‚àö[Œ£(Weight_i¬≤ √ó Variance_i) + correlation adjustments]
            let portfolioVariance = 0;
            Object.keys(weights).forEach(asset => {
                const weight = weights[asset] / 100;
                const variance = Math.pow(volatilities[asset], 2);
                portfolioVariance += Math.pow(weight, 2) * variance;
            });

            // Add correlation effects (simplified)
            const equityWeight = (weights.largecap + weights.midcap + weights.smallcap) / 100;
            const correlationAdjustment = equityWeight * 0.7 * 50; // Simplified correlation effect
            
            const portfolioRisk = Math.sqrt(portfolioVariance + correlationAdjustment);

            // Calculate Sharpe Ratio (assuming 6.5% risk-free rate)
            const riskFreeRate = 6.5;
            const sharpeRatio = (portfolioReturn - riskFreeRate) / portfolioRisk;

            // Generate portfolio analysis
            let riskLevel = '';
            let riskColor = '';
            if (portfolioRisk < 10) {
                riskLevel = 'Conservative';
                riskColor = 'risk-low';
            } else if (portfolioRisk < 20) {
                riskLevel = 'Moderate';
                riskColor = 'risk-medium';
            } else {
                riskLevel = 'Aggressive';
                riskColor = 'risk-high';
            }

            let advice = '';
            if (sharpeRatio > 0.5) {
                advice = '‚úÖ Good risk-adjusted returns. Well-balanced portfolio.';
            } else if (sharpeRatio > 0.3) {
                advice = 'üëç Decent portfolio. Consider optimizing allocation for better returns.';
            } else {
                advice = '‚ö†Ô∏è Low risk-adjusted returns. Review allocation - too much risk for returns or too conservative.';
            }

            const result = `
                <div class="advice-section">
                    <div class="advice-title">üìä Portfolio Analysis Results</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
                        <div class="market-item">
                            <div class="market-value">${portfolioReturn.toFixed(2)}%</div>
                            <div class="market-label">Expected Annual Return</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">${portfolioRisk.toFixed(2)}%</div>
                            <div class="market-label">Portfolio Risk (Volatility)</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value">${sharpeRatio.toFixed(2)}</div>
                            <div class="market-label">Sharpe Ratio</div>
                        </div>
                        <div class="market-item">
                            <div class="market-value risk-badge ${riskColor}">${riskLevel}</div>
                            <div class="market-label">Risk Profile</div>
                        </div>
                    </div>
                    
                    <div class="recommendation-card">
                        <div class="recommendation-title">üí° Portfolio Insights</div>
                        <p>${advice}</p>
                        <p><strong>Risk-Return Analysis:</strong> For every 1% additional risk, you're getting ${(portfolioReturn/portfolioRisk).toFixed(2)}% return.</p>
                        ${portfolioRisk > 25 ? '<p>‚ö†Ô∏è High volatility portfolio. Consider adding more debt allocation for stability.</p>' : ''}
                        ${portfolioReturn < 8 ? '<p>üí° Low expected returns. Consider increasing equity allocation if risk tolerance allows.</p>' : ''}
                    </div>

                    <div class="recommendation-card">
                        <div class="recommendation-title">üéØ Optimization Suggestions</div>
                        ${equityWeight > 0.8 ? '<p>‚Ä¢ Consider adding 10-20% debt allocation for stability</p>' : ''}
                        ${weights.debt > 50 ? '<p>‚Ä¢ Portfolio is very conservative. Consider adding equity for growth</p>' : ''}
                        ${totalWeight === 100 ? '<p>‚Ä¢ Rebalance quarterly to maintain target allocation</p>' : ''}
                        <p>‚Ä¢ Review and adjust allocation based on market conditions and age</p>
                        <p>‚Ä¢ Consider tax-efficient funds like ELSS for equity allocation</p>
                    </div>
                </div>
            `;

            document.getElementById('portfolioResult').innerHTML = result;
            document.getElementById('portfolioResult').className = 'advice generated';
            
            // Create portfolio allocation chart
            document.getElementById('portfolioChart').style.display = 'block';
            const activeAssets = Object.keys(weights).filter(asset => weights[asset] > 0);
            const activeWeights = activeAssets.map(asset => weights[asset]);
            const assetLabels = activeAssets.map(asset => {
                const labels = {
                    largecap: 'Large Cap',
                    midcap: 'Mid Cap', 
                    smallcap: 'Small Cap',
                    debt: 'Debt Funds',
                    gold: 'Gold',
                    international: 'International'
                };
                return labels[asset];
            });
            
            createChart('portfolioChartCanvas', 'doughnut', {
                labels: assetLabels,
                datasets: [{
                    data: activeWeights,
                    backgroundColor: ['#64ffda', '#4fc3f7', '#26c6da', '#80deea', '#ffb74d', '#ff8a65'],
                    borderColor: ['#4fc3f7', '#26c6da', '#00acc1', '#26c6da', '#ff9800', '#ff5722'],
                    borderWidth: 2
                }]
            });
        }

        function calculateRetirement() {
            const currentAge = parseInt(document.getElementById('currentAge').value);
            const retirementAge = parseInt(document.getElementById('retirementAge').value);
            const currentExpenses = parseFloat(document.getElementById('currentExpenses').value);
            const inflationRate = parseFloat(document.getElementById('inflationRate').value);
            
            if (!currentAge || !retirementAge || !currentExpenses || !inflationRate) {
                document.getElementById('retirementResult').innerHTML = 'Please fill all fields';
                document.getElementById('retirementResult').className = 'result empty';
                document.getElementById('retirementChart').style.display = 'none';
                return;
            }
            
            const yearsToRetirement = retirementAge - currentAge;
            const futureExpenses = currentExpenses * Math.pow(1 + inflationRate/100, yearsToRetirement);
            const requiredCorpus = futureExpenses * 12 * 25; // 25x annual expenses
            const monthlyTarget = requiredCorpus / (yearsToRetirement * 12) / 1.12; // Assuming 12% returns
            
            document.getElementById('retirementResult').innerHTML = 
                `<strong>Retirement Planning Summary:</strong><br>
                Years to retirement: ${yearsToRetirement} years<br>
                Future monthly expenses: ${formatCurrency(futureExpenses)}<br>
                Required retirement corpus: ${formatCurrency(requiredCorpus)}<br>
                <strong>Monthly SIP needed: ${formatCurrency(monthlyTarget)}</strong><br><br>
                <div class="advice-section">
                <div class="advice-title">üéØ Retirement Strategy</div>
                ‚Ä¢ Start with equity-heavy portfolio (70-80%)<br>
                ‚Ä¢ Gradually shift to debt as you near retirement<br>
                ‚Ä¢ Consider NPS for additional tax benefits<br>
                ‚Ä¢ Review and increase SIP by 10% annually<br>
                ${monthlyTarget > 50000 ? '‚ö†Ô∏è Target seems high. Consider reducing expenses or working longer.' : '‚úÖ Achievable target with disciplined investing.'}
                </div>`;
            document.getElementById('retirementResult').className = 'result calculated';
            
            // Create retirement growth chart
            document.getElementById('retirementChart').style.display = 'block';
            const years = [];
            const corpusValues = [];
            
            for (let year = 1; year <= yearsToRetirement; year++) {
                years.push(`Year ${year}`);
                const monthlyRate = 0.12 / 12;
                const months = year * 12;
                const futureValue = monthlyTarget * (Math.pow(1 + monthlyRate, months) - 1) / monthlyRate;
                corpusValues.push(futureValue / 100000); // Convert to lakhs for readability
            }
            
            createChart('retirementChartCanvas', 'line', {
                labels: years,
                datasets: [{
                    label: 'Retirement Corpus (‚Çπ Lakhs)',
                    data: corpusValues,
                    borderColor: '#64ffda',
                    backgroundColor: 'rgba(100, 255, 218, 0.1)',
                    tension: 0.1,
                    fill: true
                }]
            });
        }

        function calculateHomePurchase() {
            const housePrice = parseFloat(document.getElementById('housePrice').value);
            const downPaymentPercent = parseFloat(document.getElementById('downPayment').value);
            const yearsToBuy = parseFloat(document.getElementById('yearsToBuy').value);
            const propertyAppreciation = parseFloat(document.getElementById('propertyAppreciation').value);
            
            if (!housePrice || !downPaymentPercent || !yearsToBuy || !propertyAppreciation) {
                document.getElementById('homeResult').innerHTML = 'Please fill all fields';
                document.getElementById('homeResult').className = 'result empty';
                return;
            }
            
            const futureHousePrice = housePrice * Math.pow(1 + propertyAppreciation/100, yearsToBuy);
            const downPaymentRequired = futureHousePrice * (downPaymentPercent/100);
            const loanAmount = futureHousePrice - downPaymentRequired;
            const monthlySaving = downPaymentRequired / (yearsToBuy * 12) / 1.08; // Assuming 8% returns on savings
            
            // EMI calculation for reference (8.5% for 20 years)
            const monthlyRate = 8.5 / (12 * 100);
            const emi = (loanAmount * monthlyRate * Math.pow(1 + monthlyRate, 240)) / (Math.pow(1 + monthlyRate, 240) - 1);
            
            document.getElementById('homeResult').innerHTML = 
                `<strong>Home Purchase Planning:</strong><br>
                Current house price: ${formatCurrency(housePrice)}<br>
                Future house price: ${formatCurrency(futureHousePrice)}<br>
                Down payment needed: ${formatCurrency(downPaymentRequired)}<br>
                <strong>Monthly saving required: ${formatCurrency(monthlySaving)}</strong><br>
                Estimated loan amount: ${formatCurrency(loanAmount)}<br>
                Estimated EMI (8.5%, 20Y): ${formatCurrency(emi)}<br><br>
                <div class="advice-section">
                <div class="advice-title">üè° Home Buying Strategy</div>
                ‚Ä¢ Save in debt funds for down payment (lower risk)<br>
                ‚Ä¢ Start house hunting 1 year before target<br>
                ‚Ä¢ Consider location growth potential<br>
                ‚Ä¢ Factor in registration, interiors (add 10-15%)<br>
                ${emi > 40000 ? '‚ö†Ô∏è High EMI expected. Consider lower price range or longer tenure.' : '‚úÖ EMI seems manageable based on typical income levels.'}
                </div>`;
            document.getElementById('homeResult').className = 'result calculated';
        }

        function calculateEducation() {
            const childAge = parseInt(document.getElementById('childAge').value);
            const educationType = document.getElementById('educationType').value;
            const customCost = parseFloat(document.getElementById('educationCost').value);
            const educationInflation = parseFloat(document.getElementById('educationInflation').value);
            
            if (!childAge || !educationType || !educationInflation) {
                document.getElementById('educationResult').innerHTML = 'Please fill all required fields';
                document.getElementById('educationResult').className = 'result empty';
                return;
            }
            
            let currentCost;
            switch(educationType) {
                case 'engineering': currentCost = 2000000; break;
                case 'medical': currentCost = 3500000; break;
                case 'mba': currentCost = 3000000; break;
                case 'abroad': currentCost = 7500000; break;
                case 'custom': currentCost = customCost; break;
            }
            
            const yearsToEducation = 18 - childAge;
            const futureEducationCost = currentCost * Math.pow(1 + educationInflation/100, yearsToEducation);
            const monthlyTarget = futureEducationCost / (yearsToEducation * 12) / 1.12; // Assuming 12% returns
            
            document.getElementById('educationResult').innerHTML = 
                `<strong>Education Fund Planning:</strong><br>
                Child's current age: ${childAge} years<br>
                Years to education: ${yearsToEducation} years<br>
                Current education cost: ${formatCurrency(currentCost)}<br>
                Future education cost: ${formatCurrency(futureEducationCost)}<br>
                <strong>Monthly SIP needed: ${formatCurrency(monthlyTarget)}</strong><br><br>
                <div class="advice-section">
                <div class="advice-title">üéì Education Fund Strategy</div>
                ‚Ä¢ Start with equity funds for long-term growth<br>
                ‚Ä¢ Switch to debt funds 2-3 years before need<br>
                ‚Ä¢ Consider child-specific education plans<br>
                ‚Ä¢ Education loan as backup (lower interest)<br>
                ${monthlyTarget > 25000 ? '‚ö†Ô∏è High monthly target. Consider education loans to supplement.' : '‚úÖ Achievable target with early planning.'}
                </div>`;
            document.getElementById('educationResult').className = 'result calculated';
        }

        function analyzeCreditProfile() {
            const currentScore = parseInt(document.getElementById('currentCreditScore').value) || 0;
            const creditLimit = parseFloat(document.getElementById('creditCardLimit').value) || 0;
            const creditUsage = parseFloat(document.getElementById('creditCardUsage').value) || 0;
            const creditAge = parseFloat(document.getElementById('creditAge').value) || 0;
            const paymentHistory = document.getElementById('paymentHistory').value;
            
            if (!creditLimit && !creditUsage && !creditAge && !paymentHistory) {
                document.getElementById('creditResult').innerHTML = 'Please fill at least some fields to analyze your credit profile';
                document.getElementById('creditResult').className = 'advice empty';
                return;
            }
            
            let utilizationRatio = 0;
            if (creditLimit > 0) {
                utilizationRatio = (creditUsage / creditLimit) * 100;
            }
            
            let scoreRange = '';
            let scoreColor = '';
            let scoreAdvice = '';
            
            if (currentScore >= 750) {
                scoreRange = 'Excellent';
                scoreColor = 'score-excellent';
                scoreAdvice = 'Outstanding credit score! You qualify for the best interest rates and premium credit products.';
            } else if (currentScore >= 700) {
                scoreRange = 'Good';
                scoreColor = 'score-good';
                scoreAdvice = 'Good credit score. Work on maintaining low utilization and timely payments to reach excellent range.';
            } else if (currentScore >= 650) {
                scoreRange = 'Fair';
                scoreColor = 'score-fair';
                scoreAdvice = 'Fair credit score. Focus on reducing utilization below 30% and never missing payments.';
            } else if (currentScore >= 600) {
                scoreRange = 'Poor';
                scoreColor = 'score-poor';
                scoreAdvice = 'Poor credit score. Prioritize building payment history and reducing debt.';
            } else if (currentScore > 0) {
                scoreRange = 'Bad';
                scoreColor = 'score-bad';
                scoreAdvice = 'Low credit score. Consider secured credit cards and focus on rebuilding credit history.';
            }
            
            let advice = `<div class="advice-section">
                <div class="advice-title">üìä Your Credit Profile Analysis</div>`;
            
            if (currentScore > 0) {
                advice += `<div class="score-item ${scoreColor}" style="margin: 1rem auto; max-width: 200px;">
                    <div class="market-value">${currentScore}</div>
                    <div class="market-label">${scoreRange} Credit</div>
                </div>
                <p><strong>Current Status:</strong> ${scoreAdvice}</p><br>`;
            }
            
            if (creditLimit > 0) {
                advice += `<div class="recommendation-card">
                    <div class="recommendation-title">üí≥ Credit Utilization Analysis</div>
                    <p><strong>Current Utilization:</strong> ${utilizationRatio.toFixed(1)}% (‚Çπ${formatCurrency(creditUsage)} of ‚Çπ${formatCurrency(creditLimit)})</p>
                    ${utilizationRatio > 30 ? 
                        '<p>‚ö†Ô∏è High utilization! Keep below 30% to improve score. Pay down balances or request limit increases.</p>' :
                        utilizationRatio > 10 ?
                        '<p>üëç Good utilization range. Ideal is below 10% for maximum score benefit.</p>' :
                        '<p>‚úÖ Excellent utilization! This is helping your credit score significantly.</p>'
                    }
                </div>`;
            }
            
            if (creditAge > 0) {
                advice += `<div class="recommendation-card">
                    <div class="recommendation-title">üìÖ Credit History Analysis</div>
                    <p><strong>Credit Age:</strong> ${creditAge} years</p>
                    ${creditAge < 2 ? 
                        '<p>üìà Building credit history. Keep accounts active and be patient - length of history improves over time.</p>' :
                        creditAge < 5 ?
                        '<p>üëç Decent credit history. Continue maintaining accounts to strengthen this factor.</p>' :
                        '<p>‚úÖ Strong credit history! This is a major positive factor for your score.</p>'
                    }
                </div>`;
            }
            
            if (paymentHistory) {
                advice += `<div class="recommendation-card">
                    <div class="recommendation-title">üìã Payment History Assessment</div>`;
                
                switch(paymentHistory) {
                    case 'excellent':
                        advice += '<p>‚úÖ Perfect payment history! This is the most important factor (35% of score).</p>';
                        break;
                    case 'good':
                        advice += '<p>üëç Good payment history. Aim for 100% on-time payments for maximum score benefit.</p>';
                        break;
                    case 'fair':
                        advice += '<p>‚ö†Ô∏è Some late payments are hurting your score. Set up auto-pay to never miss due dates.</p>';
                        break;
                    case 'poor':
                        advice += '<p>üö® Poor payment history is severely impacting your score. Focus on timely payments from now on.</p>';
                        break;
                }
                advice += '</div>';
            }
            
            // Action plan based on profile
            advice += `<div class="recommendation-card">
                <div class="recommendation-title">üéØ Immediate Action Plan</div>
                <p><strong>Top Priorities:</strong></p>`;
            
            if (utilizationRatio > 30) {
                advice += '<p>1. Pay down credit card balances to below 30% utilization</p>';
            }
            if (paymentHistory === 'poor' || paymentHistory === 'fair') {
                advice += '<p>1. Set up auto-pay for all credit accounts</p>';
            }
            if (creditAge < 2) {
                advice += '<p>2. Keep your oldest credit account active</p>';
            }
            if (currentScore < 700) {
                advice += '<p>3. Monitor credit report monthly for errors</p>';
            }
            if (creditLimit < 100000) {
                advice += '<p>4. Request credit limit increases every 6 months</p>';
            }
            
            advice += `</div></div>`;
            
            document.getElementById('creditResult').innerHTML = advice;
            document.getElementById('creditResult').className = 'advice generated';
        }

        // Show/hide custom education cost field
        document.getElementById('educationType').addEventListener('change', function() {
            const customField = document.getElementById('customEducationCost');
            if (this.value === 'custom') {
                customField.style.display = 'block';
            } else {
                customField.style.display = 'none';
            }
        });

        // Add input event listeners for validation
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value < 0) {
                    this.value = 0;
                }
            });
        });

        // Portfolio weight validation
        document.querySelectorAll('.weight-input').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                
                // Calculate total weight
                const weights = document.querySelectorAll('#largecap_weight, #midcap_weight, #smallcap_weight, #debt_weight, #gold_weight, #international_weight');
                let total = 0;
                weights.forEach(w => total += parseFloat(w.value) || 0);
                
                // Visual feedback for total weight
                weights.forEach(w => {
                    if (total > 100) {
                        w.style.borderColor = '#f44336';
                    } else {
                        w.style.borderColor = 'rgba(100, 255, 218, 0.3)';
                    }
                });
            });
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced Smart Financial Assistant loaded successfully!');
        });
    </script> 
</body>
</html>
